!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o=e();for(var a in o)("object"==typeof exports?exports:t)[a]=o[a]}}(self,(function(){return document.addEventListener("DOMContentLoaded",(function(){var t=function(t){if(!t)return"0 B";var e=Math.floor(Math.log(t)/Math.log(1e3));return(t/Math.pow(1e3,e)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e]},e=[],o=[],a=[],n=document.querySelector("#flow"),i=document.querySelector("#work"),r=n&&echarts.init(n),l=i&&echarts.init(i);n&&i&&function n(){$.ajax({url:Joe.BASE_API,type:"POST",dataType:"json",data:{routeType:"server_status"},success:function(i){i.status||Qmsg.warning("服务器接口异常！"),$(".joe_census__server-item .count .core").html("".concat(i.cpu[1]," 核")),$(".joe_census__server-item .count .ram").html("".concat((s=i.memory.memTotal)<1024?parseInt(s)+" MB":parseInt(s/1024)+" GB")),$(".joe_census__server-item .count .up").html("总发送：".concat(t(i.upTotal))),$(".joe_census__server-item .count .down").html("总接收：".concat(t(i.downTotal)));var s,c=new Date,u=String(c.getHours()).padStart(2,0),m=String(c.getMinutes()).padStart(2,0),d=String(c.getSeconds()).padStart(2,0),p="".concat(u,":").concat(m,":").concat(d);e.push(p),o.push(i.up),a.push(i.down),e.length>5&&e.shift(),o.length>5&&o.shift(),a.length>5&&a.shift(),r.setOption({title:{subtext:"单位 KB/s"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},xAxis:{axisTick:{show:!1},type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:[{type:"line",name:"上行",smooth:!0,showSymbol:!1,itemStyle:{normal:{color:"#f39494",areaStyle:{color:"#f39494"},lineStyle:{width:2,color:"#f39494"}}},stack:"总量",data:o},{type:"line",name:"下行",smooth:!0,showSymbol:!1,itemStyle:{normal:{color:"#9dd3e8",areaStyle:{color:"#9dd3e8"},lineStyle:{width:2,color:"#9dd3e8"}}},stack:"总量",data:a}]});var y=i.cpu[0],f=Math.round(i.memory.memRealUsed/i.memory.memTotal*1e3)/10,g=Math.round(i.memory.memCached/i.memory.memTotal*1e3)/10,h=Math.round(i.memory.memBuffers/i.memory.memTotal*1e3)/10,v=Math.round(i.load.one/i.load.max*100)>100?100:Math.round(i.load.one/i.load.max*100);l.setOption({title:{subtext:"单位 百分比"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",axisTick:{show:!1},data:["CPU占用","内存占用","系统缓冲","内存缓冲","系统负载"]},yAxis:{type:"value",max:100},series:{data:[{name:"CPU占用",value:y,itemStyle:{color:"#b3c25a"}},{name:"内存占用",value:f,itemStyle:{color:"#67b580"}},{name:"系统缓冲",value:h,itemStyle:{color:"#86ba71"}},{name:"内存缓冲",value:g,itemStyle:{color:"#feb041"}},{name:"系统负载",value:v,itemStyle:{color:"#fd7e55"}}],type:"bar",showBackground:!0,label:{show:!0,color:"#ffffff",formatter:function(t){return"".concat(t.data.value,"%")}},backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}}),setTimeout(n,2e3)}})}();var s=document.querySelector("#category"),c=echarts.init(s),u=[];$(".joe_census__basic-item.category ul li").each((function(t,e){u.push({name:e.getAttribute("data-name"),value:e.getAttribute("data-value")})})),c.setOption({tooltip:{trigger:"item"},series:[{type:"pie",roseType:"area",itemStyle:{borderRadius:8},data:u}]});var m=document.querySelector("#lately"),d=echarts.init(m);$.ajax({url:Joe.BASE_API,type:"POST",dataType:"json",data:{routeType:"comment_lately"},success:function(t){d.setOption({title:{subtext:"单位 数量"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",axisTick:{show:!1},data:t.categories},yAxis:{type:"value"},series:{name:"数量",itemStyle:{normal:{color:"#91cc75",lineStyle:{width:2,color:"#91cc75"}}},data:t.series,type:"line",smooth:!0}})}});{var p=0;function y(){"loading..."!==$(".joe_census__filing .button").html()&&$.ajax({url:Joe.BASE_API,type:"POST",dataType:"json",data:{routeType:"article_filing",page:++p},success:function(t){if(!t.length)return $(".joe_census__filing .item.load").remove(),Qmsg.warning("没有更多内容了");var e="";t.forEach((function(t){e+='\n\t\t\t\t\t\t\t<div class="item">\n\t\t\t\t\t\t\t\t<div class="tail"></div>\n\t\t\t\t\t\t\t\t<div class="head"></div>\n\t\t\t\t\t\t\t\t<div class="wrapper">\n\t\t\t\t\t\t\t\t\t<div class="panel">'.concat(t.date,'<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M21.6 772.8c28.8 28.8 74.4 28.8 103.2 0L512 385.6l387.2 387.2c28.8 28.8 74.4 28.8 103.2 0 28.8-28.8 28.8-74.4 0-103.2L615.2 282.4l-77.6-77.6c-14.4-14.4-37.6-14.4-51.2 0l-77.6 77.6L21.6 669.6c-28.8 28.8-28.8 75.2 0 103.2z" /></svg></div>\n\t\t\t\t\t\t\t\t\t<ol class="panel-body">\n\t\t\t\t\t\t\t\t\t\t').concat(t.list.map((function(t){return'<li><a rel="noopener noreferrer" target="_blank" href="'.concat(t.permalink,'">').concat(t.title,"</a></li>")})).join(""),"\n\t\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t")})),$("#filing").append(e),$(".joe_census__filing .button").html("加载更多")}})}y(),$(".joe_census__filing .content").on("click",".panel",(function(){var t=$(this).parents(".content");t.find(".panel").not($(this)).removeClass("in"),t.find(".panel-body").not($(this).siblings(".panel-body")).stop().hide("fast"),$(this).toggleClass("in").siblings(".panel-body").stop().toggle("fast")})),$(".joe_census__filing .button").on("click",(function(){y(),$(this).html("loading...")}))}})),{}}));