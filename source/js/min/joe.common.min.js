!function(){const initCommentTheme=()=>{const comments=document.getElementsByTagName("halo-comment"),curMode=$("html").attr("data-mode");for(var i=0;i<comments.length;i++){var shadowDom=comments[i].shadowRoot.getElementById("halo-comment");$(shadowDom)[`${"light"===curMode?"remove":"add"}Class`]("dark")}};document.addEventListener("DOMContentLoaded",(function(){var $nav_menus=$(".joe_header__above-nav a"),$nav_side_menus=$(".panel-side-menu .link"),activeIndex=0,curPath=location.pathname;curPath&&"/"!==curPath&&$nav_menus.each((index,item)=>{curPath.indexOf(item.getAttribute("href"))>-1&&(activeIndex=index)}),$nav_menus.eq(activeIndex).addClass("current"),$nav_side_menus.eq(activeIndex).addClass("current");var $html=$("html"),$icon_light=$(".mode-light"),$icon_dark=$(".mode-dark");if(ThemeConfig.static_theme)$html.attr("data-mode",ThemeConfig.static_theme);else if(ThemeConfig.enable_auto_switch_theme){var local_theme=sessionStorage.getItem("data-mode");if(localStorage.removeItem("data-mode",theme),local_theme)$html.attr("data-mode",local_theme),"light"===local_theme?($icon_light.removeClass("active"),$icon_dark.addClass("active")):($icon_light.addClass("active"),$icon_dark.removeClass("active"));else{var light_scope=ThemeConfig.dark_time_scope.split("~"),now=new Date,today=now.toLocaleString().split(" ")[0];"light"===(theme=now>=new Date(today+" "+light_scope[0])&&now<=new Date(today+" "+light_scope[1])?"light":"dark")?($icon_light.removeClass("active"),$icon_dark.addClass("active")):($icon_light.addClass("active"),$icon_dark.removeClass("active")),$html.attr("data-mode",theme),sessionStorage.setItem("data-mode",theme)}}else{var theme=localStorage.getItem("data-mode")||"light";$(".mode-"+("light"===theme?"dark":"light")).addClass("active"),$html.attr("data-mode",theme)}if(initCommentTheme(),$(".joe_action_item.mode").on("click",(function(){var curSource=ThemeConfig.enable_auto_switch_theme?sessionStorage:localStorage,theme="";(local_theme=curSource.getItem("data-mode"))?"light"===local_theme?(theme="dark",$icon_dark.removeClass("active"),$icon_light.addClass("active")):(theme="light",$icon_light.removeClass("active"),$icon_dark.addClass("active")):(theme="dark",$icon_light.removeClass("active"),$icon_dark.addClass("active")),$html.attr("data-mode",theme),curSource.setItem("data-mode",theme),initCommentTheme()})),ThemeConfig.enabel_music_player&&$.ajax({url:`https://api.i-meto.com/meting/api?server=netease&type=playlist&id=${ThemeConfig.music_id}`,type:"GET",dataType:"json",success(res){new APlayer({container:document.getElementById("global-aplayer"),fixed:!0,lrcType:3,theme:"#1989fa",autoplay:!0,audio:res})},error(err){console.log(err)}}),Joe.IS_MOBILE||"off"===Joe.DYNAMIC_BACKGROUND||!Joe.DYNAMIC_BACKGROUND||Joe.WALLPAPER_BACKGROUND_PC||$.getScript(window.Joe.THEME_URL+`assets/backdrop/${Joe.DYNAMIC_BACKGROUND}`),ThemeConfig.favicon){var favicon=new Favico,image=new Image;image.onload=function(){favicon.image(image)},image.src=ThemeConfig.favicon}$(".joe_header__above-search .input").on("click",(function(e){e.stopPropagation(),$(".joe_header__above-search .result").addClass("active")})),$(document).on("click",(function(){$(".joe_header__above-search .result").removeClass("active")})),$(".joe_dropdown").each((function(index,item){const menu=$(this).find(".joe_dropdown__menu"),trigger=$(item).attr("trigger")||"click",placement=$(item).attr("placement")||$(this).height()||0;menu.css("top",placement),"hover"===trigger?$(this).hover(()=>$(this).addClass("active"),()=>$(this).removeClass("active")):($(this).on("click",(function(e){$(this).toggleClass("active"),$(document).one("click",()=>$(this).removeClass("active")),e.stopPropagation()})),menu.on("click",e=>e.stopPropagation()))}));{let _debounce=null;const handleScroll=()=>(document.documentElement.scrollTop||document.body.scrollTop)>300?$(".joe_action_item.scroll").addClass("active"):$(".joe_action_item.scroll").removeClass("active");handleScroll(),$(document).on("scroll",()=>{clearTimeout(_debounce),_debounce=setTimeout(handleScroll,80)}),$(".joe_action_item.scroll").on("click",()=>window.scrollTo({top:0,behavior:"smooth"}))}if($(".joe_aside__item.timelife").length){let timelife=[{title:"今日已经过去",endTitle:"小时",num:0,percent:"0%"},{title:"这周已经过去",endTitle:"天",num:0,percent:"0%"},{title:"本月已经过去",endTitle:"天",num:0,percent:"0%"},{title:"今年已经过去",endTitle:"个月",num:0,percent:"0%"}];{let todayPassHours=(+new Date-new Date((new Date).toLocaleDateString()).getTime())/1e3/60/60,todayPassHoursPercent=todayPassHours/24*100;timelife[0].num=parseInt(todayPassHours),timelife[0].percent=parseInt(todayPassHoursPercent)+"%"}{let weekDay={0:7,1:1,2:2,3:3,4:4,5:5,6:6}[(new Date).getDay()],weekDayPassPercent=weekDay/7*100;timelife[1].num=parseInt(weekDay),timelife[1].percent=parseInt(weekDayPassPercent)+"%"}{let year=(new Date).getFullYear(),date=(new Date).getDate(),month=(new Date).getMonth()+1,monthPassPercent=date/new Date(year,month,0).getDate()*100;timelife[2].num=date,timelife[2].percent=parseInt(monthPassPercent)+"%"}{let month=(new Date).getMonth()+1,yearPass=month/12*100;timelife[3].num=month,timelife[3].percent=parseInt(yearPass)+"%"}let htmlStr="";timelife.forEach((item,index)=>{htmlStr+=`\n\t\t\t\t\t\t<div class="item">\n\t\t\t\t\t\t\t<div class="title">\n\t\t\t\t\t\t\t\t${item.title}\n\t\t\t\t\t\t\t\t<span class="text">${item.num}</span>\n\t\t\t\t\t\t\t\t${item.endTitle}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="progress">\n\t\t\t\t\t\t\t\t<div class="progress-bar">\n\t\t\t\t\t\t\t\t\t<div class="progress-bar-inner progress-bar-inner-${index}" style="width: ${item.percent}"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="progress-percentage">${item.percent}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`}),$(".joe_aside__item.timelife .joe_aside__item-contain").html(htmlStr)}if($(".joe_aside__item.weather").length){const key=$(".joe_aside__item.weather").attr("data-key"),style=$(".joe_aside__item.weather").attr("data-style"),aqiColor={1:"FFFFFF",2:"4A4A4A",3:"FFFFFF"};window.WIDGET={CONFIG:{layout:2,width:"220",height:"270",background:style,dataColor:aqiColor[style],language:"zh",key:key}},$.getScript("https://widget.qweather.net/standard/static/js/he-standard-common.js?v=2.0")}if($(".joe_aside__item.tags").length){const entries=[],colors=["#F8D800","#0396FF","#EA5455","#7367F0","#32CCBC","#F6416C","#28C76F","#9F44D3","#F55555","#736EFE","#E96D71","#DE4313","#D939CD","#4C83FF","#F072B6","#C346C2","#5961F9","#FD6585","#465EFB","#FFC600","#FA742B","#5151E5","#BB4E75","#FF52E5","#49C628","#00EAFF","#F067B4","#F067B4","#ff9a9e","#00f2fe","#4facfe","#f093fb","#6fa3ef","#bc99c4","#46c47c","#f9bb3c","#e8583d","#f68e5f"],random=(min,max)=>(min=Math.ceil(min),max=Math.floor(max),Math.floor(Math.random()*(max-min+1))+min);$(".joe_aside__item-contain .list li").each((i,item)=>{entries.push({label:$(item).attr("data-label"),url:$(item).attr("data-url"),target:"_blank",fontColor:colors[random(0,colors.length-1)],fontSize:15})}),$(".joe_aside__item-contain .tag").svg3DTagCloud({entries:entries,width:220,height:220,radius:"65%",radiusMin:75,bgDraw:!1,fov:800,speed:.5,fontWeight:500})}if("off"!==Joe.LIVE2D&&Joe.LIVE2D&&$.getScript("https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.min.js",()=>{L2Dwidget.init({model:{jsonPath:Joe.LIVE2D,scale:1},mobile:{show:!1},display:{position:"right",width:160,height:200,hOffset:70,vOffset:0}})}),ThemeConfig.enable_offscreen_tip){var titleTime,OriginTitile=document.title;document.addEventListener("visibilitychange",(function(){location.href.indexOf(ThemeConfig.blog_url)>0||"/"!==location.pathname||(document.hidden?(document.title=ThemeConfig.offscreen_title_leave||"歪，你去哪里了？",clearTimeout(titleTime)):(document.title=ThemeConfig.offscreen_title_back||"(つェ⊂)咦，又回来了!",titleTime=setTimeout((function(){document.title=OriginTitile}),2e3)))}))}$(".joe_header__above-slideicon").on("click",(function(){$(".joe_header__searchout").removeClass("active"),$(".joe_header__slideout").hasClass("active")?($("body").css("overflow",""),$(".joe_header__mask").removeClass("active slideout"),$(".joe_header__slideout").removeClass("active")):($("body").css("overflow","hidden"),$(".joe_header__mask").addClass("active slideout"),$(".joe_header__slideout").addClass("active"))})),$(".joe_header__above-searchicon").on("click",(function(){$(".joe_header__slideout").removeClass("active"),$(".joe_header__searchout").hasClass("active")?($("body").css("overflow",""),$(".joe_header__mask").removeClass("active slideout"),$(".joe_header__searchout").removeClass("active")):($("body").css("overflow","hidden"),$(".joe_header__mask").addClass("active"),$(".joe_header__searchout").addClass("active"))})),$(".joe_header__mask").on("click",(function(){$("body").css("overflow",""),$(".joe_header__mask").removeClass("active slideout"),$(".joe_header__searchout").removeClass("active"),$(".joe_header__slideout").removeClass("active")})),$(".joe_header__slideout-menu .current").parents(".panel-body").show().siblings(".panel").addClass("in"),$(".joe_header__slideout-menu .panel").on("click",(function(){const panelBox=$(this).parent().parent();panelBox.find(".panel").not($(this)).removeClass("in"),panelBox.find(".panel-body").not($(this).siblings(".panel-body")).stop().hide("fast"),$(this).toggleClass("in").siblings(".panel-body").stop().toggle("fast")}));{const getRunTime=()=>{const birthDay=new Date(ThemeConfig.birthday);let day=(+new Date-birthDay.getTime())/864e5,dayPast=Math.floor(day),hour=24*(day-dayPast),hourPast=Math.floor(hour),minute=60*(hour-hourPast),minutePast=Math.floor(minute),second=60*(minute-minutePast),secondPast=Math.floor(second);day=String(dayPast).padStart(2,0),hour=String(hourPast).padStart(2,0),minute=String(minutePast).padStart(2,0),second=String(secondPast).padStart(2,0),$(".joe_run__day").html(day),$(".joe_run__hour").html(hour),$(".joe_run__minute").html(minute),$(".joe_run__second").html(second)};ThemeConfig.birthday&&/(\d{4})\/(\d{1,2})\/(\d{1,2}) (\d{1,2})\:(\d{1,2})\:(\d{1,2})/.test(ThemeConfig.birthday)&&(getRunTime(),setInterval(getRunTime,1e3))}if($(".joe_owo__contain").length&&$(".joe_owo__target").length&&$.ajax({url:window.Joe.THEME_URL+"assets/json/joe.owo.json",dataType:"json",success(res){let barStr="",scrollStr="";for(let key in res){const item=res[key];barStr+=`<div class="item" data-type="${key}">${key}</div>`,scrollStr+=`\n                            <ul class="scroll" data-type="${key}">\n\t\t\t\t\t\t\t\t${item.map(_=>`<li class="item" data-text="${_.data}">${"颜文字"===key?`${_.icon}`:`<img src="${window.Joe.THEME_URL+_.icon}" alt="${_.data}"/>`}</li>`).join("")}\n                            </ul>\n                        `}$(".joe_owo__contain").html(`\n                        <div class="seat">OωO</div>\n                        <div class="box">\n                            ${scrollStr}\n                            <div class="bar">${barStr}</div>\n                        </div>\n                    `),$(document).on("click",(function(){$(".joe_owo__contain .box").stop().slideUp("fast")})),$(".joe_owo__contain .seat").on("click",(function(e){e.stopPropagation(),$(this).siblings(".box").stop().slideToggle("fast")})),$(".joe_owo__contain .box .bar .item").on("click",(function(e){e.stopPropagation(),$(this).addClass("active").siblings().removeClass("active");const scrollIndx='.joe_owo__contain .box .scroll[data-type="'+$(this).attr("data-type")+'"]';$(scrollIndx).show().siblings(".scroll").hide()})),$(".joe_owo__contain .scroll .item").on("click",(function(){const text=$(this).attr("data-text");$(".joe_owo__target").insertContent(text)})),$(".joe_owo__contain .box .bar .item").first().click()}}),!window.Joe.IS_MOBILE){let flag=!0;const handleHeader=diffY=>{if(window.pageYOffset>=$(".joe_header").height()&&diffY<=0){if(flag)return;$(".joe_header").addClass("active"),$(".joe_aside .joe_aside__item:last-child").css("top",$(".joe_header").height()-60+15),flag=!0}else{if(!flag)return;$(".joe_header").removeClass("active"),$(".joe_aside .joe_aside__item:last-child").css("top",$(".joe_header").height()+15),flag=!1}};let Y=window.pageYOffset;handleHeader(Y);let _last=Date.now();document.addEventListener("scroll",()=>{let _now=Date.now();_now-_last>15&&(handleHeader(Y-window.pageYOffset),Y=window.pageYOffset),_last=_now})}}))}();