!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var a in o)("object"==typeof exports?exports:e)[a]=o[a]}}(self,(function(){return(()=>{window.encryption=function(e){return window.btoa(unescape(encodeURIComponent(e)))},window.decrypt=function(e){return decodeURIComponent(escape(window.atob(e)))};var e,t={initMode:function(){var e=$("html"),o=$(".mode-light"),a=$(".mode-dark"),n=localStorage.getItem("data-mode");o["".concat("light"===n?"remove":"add","Class")]("active"),a["".concat("light"===n?"add":"remove","Class")]("active"),$(".joe_action_item.mode").on("click",(function(){var i="";(n=localStorage.getItem("data-mode"))?(i="light"===n?"dark":"light",o["".concat("light"===n?"add":"remove","Class")]("active"),a["".concat("light"===n?"remove":"add","Class")]("active")):(i="dark",o.removeClass("active"),a.addClass("active")),e.attr("data-mode",i),localStorage.setItem("data-mode",i),localStorage.setItem("data-mode-timestamp",Date.now()),t.initCommentTheme()}))},loadingBar:{show:function(){ThemeConfig.enable_loading_bar&&(NProgress.configure({easing:"ease",speed:500,showSpinner:!1}),NProgress.start())},hide:function(){ThemeConfig.enable_loading_bar&&NProgress.done(!0)}},initNavbar:function(){var e=$(".joe_header__above-nav a"),t=$(".panel-side-menu .link"),o=0,a=location.pathname;a&&"/"!==a&&e.each((function(e,t){a.indexOf(t.getAttribute("href"))>-1&&(o=e)})),e.eq(o).addClass("current"),t.eq(o).addClass("current")},initCommentTheme:function(){for(var e=document.getElementsByTagName("halo-comment"),t=localStorage.getItem("data-mode"),o=0;o<e.length;o++){var a=e[o].shadowRoot.getElementById("halo-comment");$(a)["".concat("light"===t?"remove":"add","Class")]("dark")}},initBaidu:function(){ThemeConfig.check_baidu_collect&&$("#joe_baidu_record").length&&$.ajax({url:ThemeConfig.BASE_URL+"/halo-api/bd/iscollect",type:"GET",dataType:"json",data:{url:window.location.href},success:function(e){if(e.data&&e.data.collected)$("#joe_baidu_record").css("color","#67c23a").html("已收录");else if(ThemeConfig.baidu_token){$("#joe_baidu_record").html('<span style="color: #e6a23c">未收录，推送中...</span>');var t=setTimeout((function(){$.ajax({url:ThemeConfig.BASE_URL+"/halo-api/bd/push",type:"POST",dataType:"json",data:{site:ThemeConfig.HOST,token:ThemeConfig.baidu_token,urls:window.location.href},success:function(e){0===e.data.success?$("#joe_baidu_record").html('<span style="color: #f56c6c">推送失败，请检查！</span>'):$("#joe_baidu_record").html('<span style="color: #67c23a">推送成功！</span>')}}),clearTimeout(t)}),1e3)}else{var o="https://ziyuan.baidu.com/linksubmit/url?sitename=".concat(encodeURI(window.location.href));$("#joe_baidu_record").html('<a target="_blank" href="'.concat(o,'" rel="noopener noreferrer nofollow" style="color: #f56c6c">未收录，提交收录</a>'))}},error:function(e){console.log(e)}})},initMusic:function(){ThemeConfig.enabel_music_player&&$.ajax({url:"https://api.i-meto.com/meting/api?server=netease&type=playlist&id=".concat(ThemeConfig.music_id),type:"GET",dataType:"json",success:function(e){new APlayer({container:document.getElementById("global-aplayer"),fixed:!0,lrcType:3,theme:"#1989fa",autoplay:!0,audio:e})},error:function(e){console.log(e)}})},loadMouseEffect:function(){Joe.isMobile||"off"===ThemeConfig.cursor_effect||$.getScript("".concat(ThemeConfig.RES_BASE_URL,"/source/effect/cursor/").concat(ThemeConfig.cursor_effect,".js"))},initDynamicBg:function(){ThemeConfig.enable_splash},setFavicon:function(){if(ThemeConfig.favicon){var e=new Favico,t=new Image;t.onload=function(){e.image(t)},t.src=ThemeConfig.favicon}},searchDialog:function(){var e=$(".joe_header__above-search .result");$(".joe_header__above-search .input").on("click",(function(t){t.stopPropagation(),e.addClass("active")})),$(document).on("click",(function(){e.removeClass("active")}))},initDropMenu:function(){$(".joe_dropdown").each((function(e,t){var o=this,a=$(this).find(".joe_dropdown__menu"),n=$(t).attr("trigger")||"click",i=$(t).attr("placement")||$(this).height()||0;a.css("top",i),"hover"===n?$(this).hover((function(){return $(o).addClass("active")}),(function(){return $(o).removeClass("active")})):($(this).on("click",(function(e){var t=this;$(this).toggleClass("active"),$(document).one("click",(function(){return $(t).removeClass("active")})),e.stopPropagation()})),a.on("click",(function(e){return e.stopPropagation()})))}))},back2Top:function(){if(ThemeConfig.enable_back2top){var e=null,t=$(".joe_action_item.back2top"),o=function(){return(document.documentElement.scrollTop||document.body.scrollTop)>300?t.addClass("active"):t.removeClass("active")};o(),$(document).on("scroll",(function(){clearTimeout(e),e=setTimeout(o,80)})),t.on("click",(function(){return window.scrollTo({top:0,behavior:"smooth"})}))}},initTimeCount:function(){if($(".joe_aside__item.timelife").length){var e=[{title:"今日已经过去",endTitle:"小时",num:0,percent:"0%"},{title:"这周已经过去",endTitle:"天",num:0,percent:"0%"},{title:"本月已经过去",endTitle:"天",num:0,percent:"0%"},{title:"今年已经过去",endTitle:"个月",num:0,percent:"0%"}],t=(+new Date-new Date((new Date).toLocaleDateString()).getTime())/1e3/60/60,o=t/24*100;e[0].num=parseInt(t),e[0].percent=parseInt(o)+"%";var a={0:7,1:1,2:2,3:3,4:4,5:5,6:6}[(new Date).getDay()],n=a/7*100;e[1].num=parseInt(a),e[1].percent=parseInt(n)+"%";var i=(new Date).getFullYear(),c=(new Date).getDate(),r=(new Date).getMonth()+1,s=c/new Date(i,r,0).getDate()*100;e[2].num=c,e[2].percent=parseInt(s)+"%";var l=(new Date).getMonth()+1,d=l/12*100;e[3].num=l,e[3].percent=parseInt(d)+"%";var f="";e.forEach((function(e,t){f+='\n\t\t\t\t\t\t<div class="item">\n\t\t\t\t\t\t\t<div class="title">\n\t\t\t\t\t\t\t\t'.concat(e.title,'\n\t\t\t\t\t\t\t\t<span class="text">').concat(e.num,"</span>\n\t\t\t\t\t\t\t\t").concat(e.endTitle,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="progress">\n\t\t\t\t\t\t\t\t<div class="progress-bar">\n\t\t\t\t\t\t\t\t\t<div class="progress-bar-inner progress-bar-inner-').concat(t,'" style="width: ').concat(e.percent,'"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="progress-percentage">').concat(e.percent,"</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>")})),$(".joe_aside__item.timelife .joe_aside__item-contain").html(f)}},initWeather:function(){ThemeConfig.enable_weather&&ThemeConfig.weather_key&&(window.WIDGET={CONFIG:{modules:"120",background:"5",tmpColor:"FFFFFF",tmpSize:"12",cityColor:"FFFFFF",citySize:"12",aqiColor:"FFFFFF",aqiSize:"12",weatherIconSize:"12",alertIconSize:"12",padding:"5px 5px 4px 5px",shadow:"0",language:"auto",borderRadius:"4",fixed:"true",vertical:"top",horizontal:"left",key:ThemeConfig.weather_key}},$.getScript("https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"))},initGallery:function(){var e=$(".joe_detail__article img:not(img.owo_image), .joe_journal_block img");e.length&&e.each((function(){$(this).wrap($('<span style="display: block;" data-fancybox="Joe" href="'.concat($(this).attr("src"),'"></span>')))}))},initExternalLink:function(){var e=$(".page-post .joe_detail__article a[href], .joe_journal_body a[href]");e.length&&e.each((function(){$(this).attr({target:"_blank",rel:"noopener noreferrer nofollow"})}))},init3dTag:function(){if(ThemeConfig.show_tag_cloud){var e=[],t=["#F8D800","#0396FF","#EA5455","#7367F0","#32CCBC","#F6416C","#28C76F","#9F44D3","#F55555","#736EFE","#E96D71","#DE4313","#D939CD","#4C83FF","#F072B6","#C346C2","#5961F9","#FD6585","#465EFB","#FFC600","#FA742B","#5151E5","#BB4E75","#FF52E5","#49C628","#00EAFF","#F067B4","#F067B4","#ff9a9e","#00f2fe","#4facfe","#f093fb","#6fa3ef","#bc99c4","#46c47c","#f9bb3c","#e8583d","#f68e5f"];$(".tags-cloud-list li").each((function(o,a){var n,i;e.push({label:$(a).attr("data-label"),url:$(a).attr("data-url"),target:"_blank",fontColor:t[(n=0,i=t.length-1,n=Math.ceil(n),i=Math.floor(i),Math.floor(Math.random()*(i-n+1))+n)],fontSize:15})})),$("#tags-3d").svg3DTagCloud({entries:e,width:250,height:250,radius:"65%",radiusMin:75,bgDraw:!1,fov:800,speed:.5,fontWeight:500}),$(".tags-cloud-list").remove()}},initLive2d:function(){ThemeConfig.enable_live2d&&$.getScript("https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.min.js",(function(){L2Dwidget.init({model:{jsonPath:Joe.LIVE2D,scale:1},mobile:{show:!1},display:{position:"right",width:160,height:200,hOffset:70,vOffset:0}})}))},offscreenTip:function(){if(ThemeConfig.enable_offscreen_tip){var e=document.title,t=null;document.addEventListener("visibilitychange",(function(){location.href.indexOf(ThemeConfig.blog_url)>0||"/"!==location.pathname||(document.hidden?(document.title=ThemeConfig.offscreen_title_leave||"歪，你去哪里了？",clearTimeout(t)):(document.title=ThemeConfig.offscreen_title_back||"(つェ⊂)咦，又回来了!",t=setTimeout((function(){document.title=e}),2e3)))}))}},drawerMobile:function(){$(".joe_header__above-slideicon").on("click",(function(){$(".joe_header__searchout").removeClass("active"),$(".joe_header__slideout").hasClass("active")?($("body").css("overflow",""),$(".joe_header__mask").removeClass("active slideout"),$(".joe_header__slideout").removeClass("active")):($("body").css("overflow","hidden"),$(".joe_header__mask").addClass("active slideout"),$(".joe_header__slideout").addClass("active"))}))},searchMobile:function(){$(".joe_header__above-searchicon").on("click",(function(){$(".joe_header__slideout").removeClass("active"),$(".joe_header__searchout").hasClass("active")?($("body").css("overflow",""),$(".joe_header__mask").removeClass("active slideout"),$(".joe_header__searchout").removeClass("active")):($("body").css("overflow","hidden"),$(".joe_header__mask").addClass("active"),$(".joe_header__searchout").addClass("active"))}))},maskClose:function(){$(".joe_header__mask").on("click",(function(){$("body").css("overflow",""),$(".joe_header__mask").removeClass("active slideout"),$(".joe_header__searchout").removeClass("active"),$(".joe_header__slideout").removeClass("active")}))},sideMenuMobile:function(){$(".joe_header__slideout-menu .current").parents(".panel-body").show().siblings(".panel").addClass("in"),$(".joe_header__slideout-menu .panel").on("click",(function(){var e=$(this).parent().parent();e.find(".panel").not($(this)).removeClass("in"),e.find(".panel-body").not($(this).siblings(".panel-body")).stop().hide("fast"),$(this).toggleClass("in").siblings(".panel-body").stop().toggle("fast")}))},initBirthday:function(){if(ThemeConfig.enable_birthday){var e=new Date(+$(".site_life").attr("data-birthday").replace(/,/g,"")),t=$(".joe_run__day"),o=$(".joe_run__hour"),a=$(".joe_run__minute"),n=$(".joe_run__second"),i=function(){var i=(+new Date-e.getTime())/864e5,c=Math.floor(i),r=24*(i-c),s=Math.floor(r),l=60*(r-s),d=Math.floor(l),f=60*(l-d),h=Math.floor(f);i=String(c).padStart(2,0),r=String(s).padStart(2,0),l=String(d).padStart(2,0),f=String(h).padStart(2,0),t.html(i),o.html(r),a.html(l),n.html(f)};i(),setInterval(i,1e3)}},initEmoji:function(){($(".joe_owo__contain").length||$(".joe_owo__target").length)&&$.ajax({url:window.Joe.THEME_URL+"assets/json/joe.owo.json",dataType:"json",success:function(e){var t="",o="",a=function(a){var n=e[a];t+='<div class="item" data-type="'.concat(a,'">').concat(a,"</div>"),o+='\n                            <ul class="scroll" data-type="'.concat(a,'">\n\t\t\t\t\t\t\t\t').concat(n.map((function(e){return'<li class="item" data-text="'.concat(e.data,'">').concat("颜文字"===a?"".concat(e.icon):'<img src="'.concat(window.Joe.THEME_URL+e.icon,'" alt="').concat(e.data,'"/>'),"</li>")})).join(""),"\n                            </ul>\n                        ")};for(var n in e)a(n);$(".joe_owo__contain").html('\n                        <div class="seat">OωO</div>\n                        <div class="box">\n                            '.concat(o,'\n                            <div class="bar">').concat(t,"</div>\n                        </div>\n                    ")),$(document).on("click",(function(){$(".joe_owo__contain .box").stop().slideUp("fast")})),$(".joe_owo__contain .seat").on("click",(function(e){e.stopPropagation(),$(this).siblings(".box").stop().slideToggle("fast")})),$(".joe_owo__contain .box .bar .item").on("click",(function(e){e.stopPropagation(),$(this).addClass("active").siblings().removeClass("active");var t='.joe_owo__contain .box .scroll[data-type="'+$(this).attr("data-type")+'"]';$(t).show().siblings(".scroll").hide()})),$(".joe_owo__contain .scroll .item").on("click",(function(){var e=$(this).attr("data-text");$(".joe_owo__target").insertContent(e)})),$(".joe_owo__contain .box .bar .item").first().click()}})},initHeadScroll:function(){if(!window.IS_MOBILE){var e=!0,t=function(t){if(window.pageYOffset>=$(".joe_header").height()&&t<=0){if(e)return;$(".joe_header").addClass("active"),$(".joe_aside .joe_aside__item:last-child").css("top",$(".joe_header").height()-60+15),e=!0}else{if(!e)return;$(".joe_header").removeClass("active"),$(".joe_aside .joe_aside__item:last-child").css("top",$(".joe_header").height()+15),e=!1}},o=window.pageYOffset;t(o);var a=Date.now();document.addEventListener("scroll",(function(){var e=Date.now();e-a>15&&(t(o-window.pageYOffset),o=window.pageYOffset),a=e}))}},scrollToHash:function(){var e=new URLSearchParams(location.search).get("scroll");if(e){var t=$(".joe_header").height(),o=null;if((o=$("#"+e).length>0?$("#"+e):$("."+e))&&o.length>0){var a=o.offset().top-t-15;window.scrollTo({top:a,behavior:"smooth"})}}},showLoadedTime:function(){if(ThemeConfig.show_loaded_time){var e=performance.now();e&&console.log("%c页面加载耗时："+Math.round(e)+" ms | Theme By ".concat(ThemeConfig.author),"color:#fff; background: linear-gradient(270deg, #986fee, #8695e6, #68b7dd, #18d7d3); padding: 8px 15px; border-radius: 0 15px 0 15px")}},clean:function(){$("#compatiable-checker").remove(),$("#theme-config-getter").remove(),$("#metas-getter").remove()}};return e=["loadingBar","init3dTag","initLive2d","initEmoji","showLoadedTime","clean"],document.addEventListener("DOMContentLoaded",(function(){t.loadingBar.show(),Object.keys(t).forEach((function(o){return!e.includes(o)&&t[o]()}))})),window.addEventListener("load",(function(){t.init3dTag(),t.initBirthday(),t.loadingBar.hide(),t.showLoadedTime(),t.clean()})),window.commonContext=t,{}})()}));