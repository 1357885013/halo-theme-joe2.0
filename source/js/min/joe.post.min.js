!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var a in o)("object"==typeof exports?exports:e)[a]=o[a]}}(self,(function(){return e=function(e){return window.btoa(unescape(encodeURIComponent(e)))},t=function(e){return decodeURIComponent(escape(window.atob(e)))},o={initToc:function(){ThemeConfig.enable_toc&&$(".toc-container").length&&(document.body.clientWidth<=1200||(tocbot.init({tocSelector:"#js-toc",contentSelector:".joe_detail__article",ignoreSelector:".js-toc-ignore",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:ThemeConfig.tocDepth||0,hasInnerContainers:!1,headingsOffset:-80,scrollSmoothOffset:-70,positionFixedSelector:".toc-container",positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto"}),$(".toc-container").show(),$(".toc-expander i").on("click",(function(){$(this).parents(".toc-container").toggleClass("hide")}))))},initCopy:function(){if(ThemeConfig.enable_copy&&$(".joe_post").length){var e=$(".joe_detail").attr("data-curl");$(".joe_post .joe_detail").on("copy",(function(t){var o=document.body,a=window.getSelection(),n="作者：".concat(ThemeConfig.author,"<br>\n          链接：").concat(e,"<br>\n          来源：").concat(ThemeConfig.blog_title,"<br>\n          著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。");if(window.clipboardData){var i=a+"\r\n\r\n"+n;return window.clipboardData.setData("Text",i),!1}var r=a+"<br><br>"+n,l=document.createElement("div");l.style.position="absolute",l.style.left="-99999px",o.appendChild(l),l.innerHTML=r,a.selectAllChildren(l),setTimeout((function(){o.removeChild(l)}),0)}))}},initBaidu:function(){ThemeConfig.check_baidu_collect&&$("#joe_baidu_record").length&&$.ajax({url:ThemeConfig.BASE_URL+"/halo-api/bd/iscollect",type:"GET",dataType:"json",data:{url:window.location.href},success:function(e){if(e.data&&e.data.collected)$("#joe_baidu_record").css("color","#67c23a").html("已收录");else if(ThemeConfig.baidu_token){$("#joe_baidu_record").html('<span style="color: #e6a23c">未收录，推送中...</span>');var t=setTimeout((function(){$.ajax({url:ThemeConfig.BASE_URL+"/halo-api/bd/push",type:"POST",dataType:"json",data:{site:ThemeConfig.HOST,token:ThemeConfig.baidu_token,urls:window.location.href},success:function(e){0===e.data.success?$("#joe_baidu_record").html('<span style="color: #f56c6c">推送失败，请检查！</span>'):$("#joe_baidu_record").html('<span style="color: #67c23a">推送成功！</span>')}}),clearTimeout(t)}),1e3)}else{var o="https://ziyuan.baidu.com/linksubmit/url?sitename=".concat(encodeURI(window.location.href));$("#joe_baidu_record").html('<a target="_blank" href="'.concat(o,'" rel="noopener noreferrer nofollow" style="color: #f56c6c">未收录，提交收录</a>'))}},error:function(e){console.log(e)}})},initCode:function(){(ThemeConfig.enable_code_expander||ThemeConfig.enable_code_copy)&&$("pre[class*='language-']").length&&$("pre[class*='language-']").each((function(e,t){if(ThemeConfig.enable_code_expander){var o=$(t),a=$('<i class="joe-font joe-icon-arrow-downb code-expander" title="折叠/展开"></i>');a.on("click",(function(){var e=a.parent("pre").siblings(".toolbar").find(".autofold-tip");e&&e.remove(),a.parent("pre").toggleClass("close")})),o.prepend(a),ThemeConfig.fold_long_code&&location.pathname.includes("archives")&&o.height()>(ThemeConfig.long_code_height||200)&&(o.siblings(".toolbar").find(".toolbar-item span").eq(0).append('<em class="autofold-tip"><内容过长，已自动折叠></em>'),o.addClass("close"))}if(ThemeConfig.enable_code_copy){var n=$(t).find("code[class*='language-']").text(),i=$('<span class="copy-button"><i class="joe-font joe-icon-copy" title="复制代码"></i></span>');new ClipboardJS(i[0],{text:function(){return n+"\r\n\r\n"+ThemeConfig.copy_right_text}}).on("success",(function(){return Qmsg.success("复制成功！")})),$(t).addClass("copyable").append(i)}}))},initAside:function(){(ThemeConfig.enable_aside||ThemeConfig.enable_aside_expander)&&$(".aside-expander").on("click",(function(){var e=$(this);e.hasClass("active")?(e.removeClass("active"),e.html("隐藏侧边栏")):(e.addClass("active"),e.html("显示侧边栏")),$(".joe_aside").toggleClass("hide")}))},initGallery:function(){$(".joe_detail__article img:not(img.owo_image), .joe_journal_block img").each((function(){$(this).wrap($('<span style="display: block;" data-fancybox="Joe" href="'.concat($(this).attr("src"),'"></span>')))}))},initPostShare:function(){ThemeConfig.enable_share&&(ThemeConfig.enable_share_link&&$(".icon-share-link").length&&new ClipboardJS($(".icon-share-link")[0],{text:function(){return location.href}}).on("success",(function(){return Qmsg.success("文章链接已复制")})),ThemeConfig.enable_share_weixin&&$("#qrcode_wx").length&&$("#qrcode_wx").qrcode({width:140,height:140,render:"canvas",typeNumber:-1,correctLevel:0,background:"#ffffff",foreground:"#000000",text:location.href}))},initExternalLink:function(){$(".joe_detail__article a:not(.joe_detail__article-anote)").each((function(){$(this).attr({target:"_blank",rel:"noopener noreferrer nofollow"})}))},initLike:function(){if(ThemeConfig.enable_like&&$(".joe_detail__agree").length){var o=$(".joe_detail").attr("data-cid"),a=+($(".joe_detail").attr("data-clikes")||0),n=localStorage.getItem(e("agree"))?JSON.parse(t(localStorage.getItem(e("agree")))):[],i=$(".joe_detail__agree .icon"),r=$(".joe_detail__agree .icon-like"),l=$(".joe_detail__agree .icon-unlike"),c=$(".joe_detail__agree .text");n.includes(o)?l.addClass("active"):r.addClass("active"),c.html(a);var s=!1;r.on("click",(function(){if(!s){s=!0;var d=(n=localStorage.getItem(e("agree"))?JSON.parse(t(localStorage.getItem(e("agree")))):[]).includes(o);$.ajax({url:"/api/content/posts/"+o+"/likes",type:"POST",dataType:"json",data:{type:d?"disagree":"agree"},success:function(t){if(200===t.status){var s=a;if(d){s--;var f=n.findIndex((function(e){return e===o}));n.splice(f,1),l.removeClass("active"),r.addClass("active"),i.removeClass("active")}else s++,n.push(o),r.removeClass("active"),l.addClass("active"),i.addClass("active");var u=e("agree"),h=e(JSON.stringify(n));localStorage.setItem(u,h),c.html(s)}},error:function(e){return s=!1,Qmsg.warning(e.responseJSON.message)},complete:function(){s=!1}})}}))}},initVideo:function(){if($(".joe_detail__article-video").length){var e=$(".joe_detail__article-video .play iframe").attr("data-player");$(".joe_detail__article-video .episodes .item").on("click",(function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).attr("data-src");$(".joe_detail__article-video .play iframe").attr({src:e+t})})),$(".joe_detail__article-video .episodes .item").first().click()}},initJournals:function(){$(".journal_content_expander").on("click",(function(){$(this).parent().toggleClass("open")}));var o=$(".joe_journal__item");o.length&&o.each((function(o,a){var n=$(this),i=n.attr("data-cid"),r=+(n.attr("data-clikes")||0),l=localStorage.getItem(e("agree-journal"))?JSON.parse(t(localStorage.getItem(e("agree-journal")))):[],c=n.find(".journal-like"),s=n.find(".journal-unlike"),d=n.find(".journal-likes-num");l.includes(i)?(c.hide(),s.show()):(c.show(),s.hide()),d.html(r),c.on("click",(function(){var o=!1;if(!o){o=!0;var a=(l=localStorage.getItem(e("agree-journal"))?JSON.parse(t(localStorage.getItem(e("agree-journal")))):[]).includes(i);$.ajax({url:"/api/content/journals/"+i+"/likes",type:"POST",dataType:"json",data:{type:a?"disagree":"agree"},success:function(t){if(200===t.status){var o=r;if(a){o--;var n=l.findIndex((function(e){return e===i}));l.splice(n,1),c.show(),s.hide()}else o++,l.push(i),c.hide(),s.show();var f=e("agree-journal"),u=e(JSON.stringify(l));localStorage.setItem(f,u),d.html(o)}},error:function(e){return o=!1,Qmsg.warning(e.responseJSON.message)},complete:function(){o=!1}})}}))})),ThemeConfig.enable_comment_journal&&$(".journal_comment_expander,.journal-comment").on("click",(function(){var e=$(this).parents(".footer-wrap");if(ThemeConfig.enable_autoload_comment_journal){var t=e.find("halo-comment")[0].shadowRoot.getElementById("halo-comment").__vue__;e.hasClass("open")||t.loaded||t.loadComments()}e.toggleClass("open"),e.find(".journal_comment_expander_txt").html((e.hasClass("open")?"收起":"查看")+"评论")}))},initMathjax:function(){ThemeConfig.enable_mathjax&&window.katex&&renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})}},document.addEventListener("DOMContentLoaded",(function(){if(Object.keys(o).forEach((function(e){return o[e]()})),ThemeConfig.show_tag_cloud){var e=[],t=["#F8D800","#0396FF","#EA5455","#7367F0","#32CCBC","#F6416C","#28C76F","#9F44D3","#F55555","#736EFE","#E96D71","#DE4313","#D939CD","#4C83FF","#F072B6","#C346C2","#5961F9","#FD6585","#465EFB","#FFC600","#FA742B","#5151E5","#BB4E75","#FF52E5","#49C628","#00EAFF","#F067B4","#F067B4","#ff9a9e","#00f2fe","#4facfe","#f093fb","#6fa3ef","#bc99c4","#46c47c","#f9bb3c","#e8583d","#f68e5f"];$(".tags-cloud-list li").each((function(o,a){var n,i;e.push({label:$(a).attr("data-label"),url:$(a).attr("data-url"),target:"_blank",fontColor:t[(n=0,i=t.length-1,n=Math.ceil(n),i=Math.floor(i),Math.floor(Math.random()*(i-n+1))+n)],fontSize:15})})),$("#tags-3d").svg3DTagCloud({entries:e,width:250,height:250,radius:"65%",radiusMin:75,bgDraw:!1,fov:800,speed:.5,fontWeight:500}),$(".tags-cloud-list").remove()}})),window.addEventListener("load",(function(){var e=new URLSearchParams(location.search).get("scroll");if(e){var t=$(".joe_header").height(),o=null;if((o=$("#"+e).length>0?$("#"+e):$("."+e))&&o.length>0){var a=o.offset().top-t-15;window.scrollTo({top:a,behavior:"smooth"})}}$(".joe_journal_body .content-wrp").each((function(){$(this)[0].getBoundingClientRect().height>270&&$(this).siblings(".journal_content_expander").show()}))})),{};var e,t,o}));