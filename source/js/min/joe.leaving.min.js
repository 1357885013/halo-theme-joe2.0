!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var n in a)("object"==typeof exports?exports:e)[n]=a[n]}}(self,(function(){return e={getData:function(){var t=$(".joe_detail__title").attr("data-sheetid");Utils.request("/api/content/sheets/".concat(t,"/comments/top_view"),"GET").then((function(t){var a=$(".joe_detail__leaving-list"),n=$(".joe_detail__leaving-none");if(t.total){var o=t.content.reduce((function(e,t){if(t.content.trim()){var a=marked(t.content).replace(/<img\ssrc[^>]*>/gm,"[图片内容]").replace(/bili\//g,"bili/hd/ic_emoji_"),n=Utils.renderedEmojiHtml(a);t.content=Utils.return2Br(n)}var o="".concat(ThemeConfig.gravatar_source||ThemeConfig.gravatar_source_url,"/").concat(t.gravatarMd5,"?s=256&d=").concat(ThemeConfig.gravatar_type);return e+'<li class="item">\n            <div class="user">\n                <img class="avatar lazyload" src="'.concat(ThemeConfig.lazyload_avatar,'" data-src="').concat(o,'" alt="用户头像" onerror="this.src=\'').concat(ThemeConfig.comment_avatar_error,'\'"/>\n                <div class="nickname">').concat(t.author,'</div>\n                <div class="date">').concat(new Date(t.createTime).toLocaleDateString(),'</div>\n            </div>\n            <div class="wrapper">\n                <div class="content leaving-content">').concat(t.content,"</div>\n            </div>\n        </li>")}),"");a.html(o),e.randomColor(),a.show(),n.hide()}else a.hide(),n.show()})).catch((function(e){$leavingList.hide(),$leavingNone.show()}))},randomColor:function(){var e=100,t=["#dcc10c","#299bec","#ea5455","#7367f0","#32ccbb","#f6416c","#28c76f","#9f44d3","#f55555","#736efe","#e96d71","#de4313","#d939cd","#4c83ff","#f072b6","#c346c2","#5961f9","#fd6585","#465efb","#ffc600","#fa742b","#5151e5","#bb4e75","#e255cd","#63c549","#0ecdde","#f067b4","#f067b4","#ff9a9e","#1dd5de","#4facfe","#f093fb","#6fa3ef","#bc99c4","#46c47c","#f9bb3c","#e8583d","#f68e5f"],a=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},n=$(".joe_detail__leaving-list"),o=n.width(),c=n.height(),i=["20px 300px","20px 400px","20px 500px","30px 300px","30px 400px","30px 500px","40px 300px","40px 400px","40px 500px"],r=["300px 20px","400px 20px","500px 20px","300px 30px","400px 30px","500px 30px","300px 40px","400px 40px","500px 40px"];$(".joe_detail__leaving-list .item").each((function(n,d){var l=a(1,99),f=t[a(0,t.length-1)],s=Math.ceil($(d).width()),p=Math.ceil($(d).height()),x=a(0,c-p),h=a(0,o-s);$(d).css({display:"block",zIndex:l,background:f,top:x,left:h,borderTopLeftRadius:r[a(0,r.length-1)],borderTopRightRadius:i[a(0,i.length-1)],borderBottomLeftRadius:i[a(0,i.length-1)],borderBottomRightRadius:i[a(0,i.length-1)]}),$(d).draggabilly({containment:!0}),$(d).on("dragStart",(function(t){e++,$(d).css({zIndex:e})}))}))}},document.addEventListener("DOMContentLoaded",(function(){e.getData()})),{};var e}));